<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1205px" preserveAspectRatio="none" style="width:794px;height:1205px;background:#FFFFFF;" version="1.1" viewBox="0 0 794 1205" width="794px" zoomAndPan="magnify"><defs><filter height="300%" id="fa84pglxct463" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[d64883541e3d62e3241c4d12decf100d]
cluster Application--><polygon fill="#FFFFFF" filter="url(#fa84pglxct463)" points="245,6,329,6,336,29.6094,581,29.6094,581,161,245,161,245,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="245" x2="336" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="249" y="22.5332">Application</text><!--MD5=[eba421ac8e20ac42f3ee759fe6c4cf96]
cluster Device--><polygon fill="#FFFFFF" filter="url(#fa84pglxct463)" points="16,185,71,185,78,208.6094,712,208.6094,712,476,16,476,16,185" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="78" y1="208.6094" y2="208.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="49" x="20" y="201.5332">Device</text><!--MD5=[61c41a14a0f790ada34cbd71756aea65]
cluster Driver--><polygon fill="#FFFFFF" filter="url(#fa84pglxct463)" points="175,500,225,500,232,523.6094,777,523.6094,777,1198,175,1198,175,500" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="175" x2="232" y1="523.6094" y2="523.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44" x="179" y="516.5332">Driver</text><!--MD5=[fcc3e949faeeb705efb1ec4534c325ce]
class Meassurement--><rect codeLine="3" fill="#FEFECE" filter="url(#fa84pglxct463)" height="48" id="Meassurement" style="stroke:#A80036;stroke-width:1.5;" width="115" x="261.5" y="69.5"/><ellipse cx="276.5" cy="85.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M279.2656,81.375 Q279.4219,81.1563 279.6094,81.0469 Q279.7969,80.9375 280.0156,80.9375 Q280.3906,80.9375 280.625,81.1953 Q280.8594,81.4531 280.8594,82.0625 L280.8594,83.5156 Q280.8594,84.125 280.625,84.3906 Q280.3906,84.6563 280.0156,84.6563 Q279.6719,84.6563 279.4688,84.4531 Q279.2656,84.2656 279.1563,83.75 Q279.1094,83.3906 278.9219,83.2031 Q278.5938,82.8281 277.9844,82.6094 Q277.375,82.3906 276.75,82.3906 Q275.9844,82.3906 275.3516,82.7188 Q274.7188,83.0469 274.2266,83.7969 Q273.7344,84.5469 273.7344,85.5781 L273.7344,86.6719 Q273.7344,87.9063 274.625,88.7266 Q275.5156,89.5469 277.1094,89.5469 Q278.0469,89.5469 278.7031,89.2969 Q279.0938,89.1406 279.5156,88.7031 Q279.7813,88.4375 279.9297,88.3594 Q280.0781,88.2813 280.2813,88.2813 Q280.6094,88.2813 280.8672,88.5391 Q281.125,88.7969 281.125,89.1406 Q281.125,89.4844 280.7813,89.8906 Q280.2813,90.4688 279.4844,90.7969 Q278.4063,91.25 277.1094,91.25 Q275.5938,91.25 274.3906,90.625 Q273.4063,90.125 272.7188,89.0547 Q272.0313,87.9844 272.0313,86.7031 L272.0313,85.5469 Q272.0313,84.2188 272.6484,83.0703 Q273.2656,81.9219 274.3594,81.3047 Q275.4531,80.6875 276.6875,80.6875 Q277.4219,80.6875 278.0703,80.8516 Q278.7188,81.0156 279.2656,81.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="290.5" y="90.4102">Meassurement</text><line style="stroke:#A80036;stroke-width:1.5;" x1="262.5" x2="375.5" y1="101.5" y2="101.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="262.5" x2="375.5" y1="109.5" y2="109.5"/><!--MD5=[45a0bc03ebf70602769dbf80803c9ff5]
class StoragesContainer--><rect codeLine="5" fill="#FEFECE" filter="url(#fa84pglxct463)" height="103.3438" id="StoragesContainer" style="stroke:#A80036;stroke-width:1.5;" width="153" x="411.5" y="42"/><ellipse cx="434.15" cy="58" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M436.9156,53.875 Q437.0719,53.6563 437.2594,53.5469 Q437.4469,53.4375 437.6656,53.4375 Q438.0406,53.4375 438.275,53.6953 Q438.5094,53.9531 438.5094,54.5625 L438.5094,56.0156 Q438.5094,56.625 438.275,56.8906 Q438.0406,57.1563 437.6656,57.1563 Q437.3219,57.1563 437.1188,56.9531 Q436.9156,56.7656 436.8063,56.25 Q436.7594,55.8906 436.5719,55.7031 Q436.2438,55.3281 435.6344,55.1094 Q435.025,54.8906 434.4,54.8906 Q433.6344,54.8906 433.0016,55.2188 Q432.3688,55.5469 431.8766,56.2969 Q431.3844,57.0469 431.3844,58.0781 L431.3844,59.1719 Q431.3844,60.4063 432.275,61.2266 Q433.1656,62.0469 434.7594,62.0469 Q435.6969,62.0469 436.3531,61.7969 Q436.7438,61.6406 437.1656,61.2031 Q437.4313,60.9375 437.5797,60.8594 Q437.7281,60.7813 437.9313,60.7813 Q438.2594,60.7813 438.5172,61.0391 Q438.775,61.2969 438.775,61.6406 Q438.775,61.9844 438.4313,62.3906 Q437.9313,62.9688 437.1344,63.2969 Q436.0563,63.75 434.7594,63.75 Q433.2438,63.75 432.0406,63.125 Q431.0563,62.625 430.3688,61.5547 Q429.6813,60.4844 429.6813,59.2031 L429.6813,58.0469 Q429.6813,56.7188 430.2984,55.5703 Q430.9156,54.4219 432.0094,53.8047 Q433.1031,53.1875 434.3375,53.1875 Q435.0719,53.1875 435.7203,53.3516 Q436.3688,53.5156 436.9156,53.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="449.85" y="62.9102">StoragesContainer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="412.5" x2="563.5" y1="74" y2="74"/><line style="stroke:#A80036;stroke-width:1.5;" x1="412.5" x2="563.5" y1="82" y2="82"/><ellipse cx="422.5" cy="93" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44" x="431.5" y="97.4189">void init()</text><ellipse cx="422.5" cy="106.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="431.5" y="111.2549">void configure()</text><ellipse cx="422.5" cy="120.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="47" x="431.5" y="125.0908">void tick()</text><ellipse cx="422.5" cy="134.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="431.5" y="138.9268">void write(Meassurement)</text><!--MD5=[e8cfd755308414781c0123d0000bbf77]
class IStorage--><rect codeLine="16" fill="#FEFECE" filter="url(#fa84pglxct463)" height="103.3438" id="IStorage" style="stroke:#A80036;stroke-width:1.5;" width="97" x="284.5" y="357"/><ellipse cx="307.6" cy="373" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M308.5531,369.6406 L308.5531,376.2969 L310.2719,376.2969 Q310.8813,376.2969 311.1469,376.5313 Q311.4125,376.7656 311.4125,377.1563 Q311.4125,377.5313 311.1469,377.7656 Q310.8813,378 310.2719,378 L305.1313,378 Q304.5219,378 304.2563,377.7656 Q303.9906,377.5313 303.9906,377.1406 Q303.9906,376.7656 304.2563,376.5313 Q304.5219,376.2969 305.1313,376.2969 L306.85,376.2969 L306.85,369.6406 L305.1313,369.6406 Q304.5219,369.6406 304.2563,369.4063 Q303.9906,369.1719 303.9906,368.7813 Q303.9906,368.4063 304.2563,368.1719 Q304.5219,367.9375 305.1313,367.9375 L310.2719,367.9375 Q310.8813,367.9375 311.1469,368.1719 Q311.4125,368.4063 311.4125,368.7813 Q311.4125,369.1719 311.1469,369.4063 Q310.8813,369.6406 310.2719,369.6406 L308.5531,369.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="47" x="323.4" y="377.9102">IStorage</text><line style="stroke:#A80036;stroke-width:1.5;" x1="285.5" x2="380.5" y1="389" y2="389"/><line style="stroke:#A80036;stroke-width:1.5;" x1="285.5" x2="380.5" y1="397" y2="397"/><ellipse cx="295.5" cy="408" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44" x="304.5" y="412.4189">void init()</text><ellipse cx="295.5" cy="421.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="304.5" y="426.2549">void deinit()</text><ellipse cx="295.5" cy="435.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="304.5" y="440.0908">void write()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="292.5" y="446.5078"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="304.5" y="453.9268">void serialize()</text><!--MD5=[7db34624215397195264460eca68bfc7]
class SDCardStorage--><rect codeLine="24" fill="#FEFECE" filter="url(#fa84pglxct463)" height="61.8359" id="SDCardStorage" style="stroke:#A80036;stroke-width:1.5;" width="119" x="576.5" y="228"/><ellipse cx="591.5" cy="244" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M594.2656,239.875 Q594.4219,239.6563 594.6094,239.5469 Q594.7969,239.4375 595.0156,239.4375 Q595.3906,239.4375 595.625,239.6953 Q595.8594,239.9531 595.8594,240.5625 L595.8594,242.0156 Q595.8594,242.625 595.625,242.8906 Q595.3906,243.1563 595.0156,243.1563 Q594.6719,243.1563 594.4688,242.9531 Q594.2656,242.7656 594.1563,242.25 Q594.1094,241.8906 593.9219,241.7031 Q593.5938,241.3281 592.9844,241.1094 Q592.375,240.8906 591.75,240.8906 Q590.9844,240.8906 590.3516,241.2188 Q589.7188,241.5469 589.2266,242.2969 Q588.7344,243.0469 588.7344,244.0781 L588.7344,245.1719 Q588.7344,246.4063 589.625,247.2266 Q590.5156,248.0469 592.1094,248.0469 Q593.0469,248.0469 593.7031,247.7969 Q594.0938,247.6406 594.5156,247.2031 Q594.7813,246.9375 594.9297,246.8594 Q595.0781,246.7813 595.2813,246.7813 Q595.6094,246.7813 595.8672,247.0391 Q596.125,247.2969 596.125,247.6406 Q596.125,247.9844 595.7813,248.3906 Q595.2813,248.9688 594.4844,249.2969 Q593.4063,249.75 592.1094,249.75 Q590.5938,249.75 589.3906,249.125 Q588.4063,248.625 587.7188,247.5547 Q587.0313,246.4844 587.0313,245.2031 L587.0313,244.0469 Q587.0313,242.7188 587.6484,241.5703 Q588.2656,240.4219 589.3594,239.8047 Q590.4531,239.1875 591.6875,239.1875 Q592.4219,239.1875 593.0703,239.3516 Q593.7188,239.5156 594.2656,239.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="605.5" y="248.9102">SDCardStorage</text><line style="stroke:#A80036;stroke-width:1.5;" x1="577.5" x2="694.5" y1="260" y2="260"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="584.5" y="268"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="596.5" y="275.4189">fileName</text><line style="stroke:#A80036;stroke-width:1.5;" x1="577.5" x2="694.5" y1="281.8359" y2="281.8359"/><!--MD5=[593d588e1c6f1d7ea50db6f5126e276f]
class UARTStorage--><rect codeLine="28" fill="#FEFECE" filter="url(#fa84pglxct463)" height="48" id="UARTStorage" style="stroke:#A80036;stroke-width:1.5;" width="107" x="434.5" y="235"/><ellipse cx="449.5" cy="251" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M452.2656,246.875 Q452.4219,246.6563 452.6094,246.5469 Q452.7969,246.4375 453.0156,246.4375 Q453.3906,246.4375 453.625,246.6953 Q453.8594,246.9531 453.8594,247.5625 L453.8594,249.0156 Q453.8594,249.625 453.625,249.8906 Q453.3906,250.1563 453.0156,250.1563 Q452.6719,250.1563 452.4688,249.9531 Q452.2656,249.7656 452.1563,249.25 Q452.1094,248.8906 451.9219,248.7031 Q451.5938,248.3281 450.9844,248.1094 Q450.375,247.8906 449.75,247.8906 Q448.9844,247.8906 448.3516,248.2188 Q447.7188,248.5469 447.2266,249.2969 Q446.7344,250.0469 446.7344,251.0781 L446.7344,252.1719 Q446.7344,253.4063 447.625,254.2266 Q448.5156,255.0469 450.1094,255.0469 Q451.0469,255.0469 451.7031,254.7969 Q452.0938,254.6406 452.5156,254.2031 Q452.7813,253.9375 452.9297,253.8594 Q453.0781,253.7813 453.2813,253.7813 Q453.6094,253.7813 453.8672,254.0391 Q454.125,254.2969 454.125,254.6406 Q454.125,254.9844 453.7813,255.3906 Q453.2813,255.9688 452.4844,256.2969 Q451.4063,256.75 450.1094,256.75 Q448.5938,256.75 447.3906,256.125 Q446.4063,255.625 445.7188,254.5547 Q445.0313,253.4844 445.0313,252.2031 L445.0313,251.0469 Q445.0313,249.7188 445.6484,248.5703 Q446.2656,247.4219 447.3594,246.8047 Q448.4531,246.1875 449.6875,246.1875 Q450.4219,246.1875 451.0703,246.3516 Q451.7188,246.5156 452.2656,246.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75" x="463.5" y="255.9102">UARTStorage</text><line style="stroke:#A80036;stroke-width:1.5;" x1="435.5" x2="540.5" y1="267" y2="267"/><line style="stroke:#A80036;stroke-width:1.5;" x1="435.5" x2="540.5" y1="275" y2="275"/><!--MD5=[5dabd1a6e6389832061ac86dbbf44f08]
class WifiStorage--><rect codeLine="36" fill="#FEFECE" filter="url(#fa84pglxct463)" height="75.6719" id="WifiStorage" style="stroke:#A80036;stroke-width:1.5;" width="95" x="304.5" y="221"/><ellipse cx="319.5" cy="237" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M322.2656,232.875 Q322.4219,232.6563 322.6094,232.5469 Q322.7969,232.4375 323.0156,232.4375 Q323.3906,232.4375 323.625,232.6953 Q323.8594,232.9531 323.8594,233.5625 L323.8594,235.0156 Q323.8594,235.625 323.625,235.8906 Q323.3906,236.1563 323.0156,236.1563 Q322.6719,236.1563 322.4688,235.9531 Q322.2656,235.7656 322.1563,235.25 Q322.1094,234.8906 321.9219,234.7031 Q321.5938,234.3281 320.9844,234.1094 Q320.375,233.8906 319.75,233.8906 Q318.9844,233.8906 318.3516,234.2188 Q317.7188,234.5469 317.2266,235.2969 Q316.7344,236.0469 316.7344,237.0781 L316.7344,238.1719 Q316.7344,239.4063 317.625,240.2266 Q318.5156,241.0469 320.1094,241.0469 Q321.0469,241.0469 321.7031,240.7969 Q322.0938,240.6406 322.5156,240.2031 Q322.7813,239.9375 322.9297,239.8594 Q323.0781,239.7813 323.2813,239.7813 Q323.6094,239.7813 323.8672,240.0391 Q324.125,240.2969 324.125,240.6406 Q324.125,240.9844 323.7813,241.3906 Q323.2813,241.9688 322.4844,242.2969 Q321.4063,242.75 320.1094,242.75 Q318.5938,242.75 317.3906,242.125 Q316.4063,241.625 315.7188,240.5547 Q315.0313,239.4844 315.0313,238.2031 L315.0313,237.0469 Q315.0313,235.7188 315.6484,234.5703 Q316.2656,233.4219 317.3594,232.8047 Q318.4531,232.1875 319.6875,232.1875 Q320.4219,232.1875 321.0703,232.3516 Q321.7188,232.5156 322.2656,232.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="63" x="333.5" y="241.9102">WifiStorage</text><line style="stroke:#A80036;stroke-width:1.5;" x1="305.5" x2="398.5" y1="253" y2="253"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="312.5" y="261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="324.5" y="268.4189">login</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="312.5" y="274.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="324.5" y="282.2549">password</text><line style="stroke:#A80036;stroke-width:1.5;" x1="305.5" x2="398.5" y1="288.6719" y2="288.6719"/><path d="M32.5,229.5 L32.5,288.5547 A0,0 0 0 0 32.5,288.5547 L269.5,288.5547 A0,0 0 0 0 269.5,288.5547 L269.5,263 L304.34,259 L269.5,255 L269.5,239.5 L259.5,229.5 L32.5,229.5 A0,0 0 0 0 32.5,229.5 " fill="#FBFB77" filter="url(#fa84pglxct463)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M259.5,229.5 L259.5,239.5 L269.5,239.5 L259.5,229.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="38.5" y="247.9951">ESP8266MOD has only Wifi support.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="38.5" y="264.3467">In future it would be possible</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="38.5" y="280.6982">to use ESP32 that has also Bloototh.</text><!--MD5=[55cf75b686679030a2cc053f7a18829b]
class IStorageDriver--><rect codeLine="43" fill="#FEFECE" filter="url(#fa84pglxct463)" height="89.5078" id="IStorageDriver" style="stroke:#A80036;stroke-width:1.5;" width="112" x="628" y="891"/><ellipse cx="643" cy="907" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M643.9531,903.6406 L643.9531,910.2969 L645.6719,910.2969 Q646.2813,910.2969 646.5469,910.5313 Q646.8125,910.7656 646.8125,911.1563 Q646.8125,911.5313 646.5469,911.7656 Q646.2813,912 645.6719,912 L640.5313,912 Q639.9219,912 639.6563,911.7656 Q639.3906,911.5313 639.3906,911.1406 Q639.3906,910.7656 639.6563,910.5313 Q639.9219,910.2969 640.5313,910.2969 L642.25,910.2969 L642.25,903.6406 L640.5313,903.6406 Q639.9219,903.6406 639.6563,903.4063 Q639.3906,903.1719 639.3906,902.7813 Q639.3906,902.4063 639.6563,902.1719 Q639.9219,901.9375 640.5313,901.9375 L645.6719,901.9375 Q646.2813,901.9375 646.5469,902.1719 Q646.8125,902.4063 646.8125,902.7813 Q646.8125,903.1719 646.5469,903.4063 Q646.2813,903.6406 645.6719,903.6406 L643.9531,903.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="80" x="657" y="911.9102">IStorageDriver</text><line style="stroke:#A80036;stroke-width:1.5;" x1="629" x2="739" y1="923" y2="923"/><line style="stroke:#A80036;stroke-width:1.5;" x1="629" x2="739" y1="931" y2="931"/><ellipse cx="639" cy="942" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44" x="648" y="946.4189">void init()</text><ellipse cx="639" cy="955.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="648" y="960.2549">void deinit()</text><ellipse cx="639" cy="969.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="648" y="974.0908">void write()</text><!--MD5=[de27ec6bb9ae4d985ba3a8f3c8f525a7]
class SDCardDriver--><rect codeLine="49" fill="#FEFECE" filter="url(#fa84pglxct463)" height="158.6875" id="SDCardDriver" style="stroke:#A80036;stroke-width:1.5;" width="150" x="611" y="672"/><ellipse cx="644.9" cy="688" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M647.6656,683.875 Q647.8219,683.6563 648.0094,683.5469 Q648.1969,683.4375 648.4156,683.4375 Q648.7906,683.4375 649.025,683.6953 Q649.2594,683.9531 649.2594,684.5625 L649.2594,686.0156 Q649.2594,686.625 649.025,686.8906 Q648.7906,687.1563 648.4156,687.1563 Q648.0719,687.1563 647.8688,686.9531 Q647.6656,686.7656 647.5563,686.25 Q647.5094,685.8906 647.3219,685.7031 Q646.9938,685.3281 646.3844,685.1094 Q645.775,684.8906 645.15,684.8906 Q644.3844,684.8906 643.7516,685.2188 Q643.1188,685.5469 642.6266,686.2969 Q642.1344,687.0469 642.1344,688.0781 L642.1344,689.1719 Q642.1344,690.4063 643.025,691.2266 Q643.9156,692.0469 645.5094,692.0469 Q646.4469,692.0469 647.1031,691.7969 Q647.4938,691.6406 647.9156,691.2031 Q648.1813,690.9375 648.3297,690.8594 Q648.4781,690.7813 648.6813,690.7813 Q649.0094,690.7813 649.2672,691.0391 Q649.525,691.2969 649.525,691.6406 Q649.525,691.9844 649.1813,692.3906 Q648.6813,692.9688 647.8844,693.2969 Q646.8063,693.75 645.5094,693.75 Q643.9938,693.75 642.7906,693.125 Q641.8063,692.625 641.1188,691.5547 Q640.4313,690.4844 640.4313,689.2031 L640.4313,688.0469 Q640.4313,686.7188 641.0484,685.5703 Q641.6656,684.4219 642.7594,683.8047 Q643.8531,683.1875 645.0875,683.1875 Q645.8219,683.1875 646.4703,683.3516 Q647.1188,683.5156 647.6656,683.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="76" x="663.1" y="692.9102">SDCardDriver</text><line style="stroke:#A80036;stroke-width:1.5;" x1="612" x2="760" y1="704" y2="704"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="712"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="631" y="719.4189">fileSystemHandler</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="725.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="631" y="733.2549">logFileHandler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="612" x2="760" y1="739.6719" y2="739.6719"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="747.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112" x="631" y="755.0908">void mountFileSystem()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="761.5078"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="631" y="768.9268">void unmountFileSystem()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="775.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="631" y="782.7627">void openFile()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="789.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="631" y="796.5986">void closeFile()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="803.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="631" y="810.4346">void sync()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="619" y="816.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="631" y="824.2705">void writeToFile()</text><!--MD5=[474bed6931f6f2fe1a50ff8fcd1078a5]
class UARTStorageDriver--><rect codeLine="61" fill="#FEFECE" filter="url(#fa84pglxct463)" height="75.6719" id="UARTStorageDriver" style="stroke:#A80036;stroke-width:1.5;" width="139" x="436.5" y="713.5"/><ellipse cx="451.5" cy="729.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M454.2656,725.375 Q454.4219,725.1563 454.6094,725.0469 Q454.7969,724.9375 455.0156,724.9375 Q455.3906,724.9375 455.625,725.1953 Q455.8594,725.4531 455.8594,726.0625 L455.8594,727.5156 Q455.8594,728.125 455.625,728.3906 Q455.3906,728.6563 455.0156,728.6563 Q454.6719,728.6563 454.4688,728.4531 Q454.2656,728.2656 454.1563,727.75 Q454.1094,727.3906 453.9219,727.2031 Q453.5938,726.8281 452.9844,726.6094 Q452.375,726.3906 451.75,726.3906 Q450.9844,726.3906 450.3516,726.7188 Q449.7188,727.0469 449.2266,727.7969 Q448.7344,728.5469 448.7344,729.5781 L448.7344,730.6719 Q448.7344,731.9063 449.625,732.7266 Q450.5156,733.5469 452.1094,733.5469 Q453.0469,733.5469 453.7031,733.2969 Q454.0938,733.1406 454.5156,732.7031 Q454.7813,732.4375 454.9297,732.3594 Q455.0781,732.2813 455.2813,732.2813 Q455.6094,732.2813 455.8672,732.5391 Q456.125,732.7969 456.125,733.1406 Q456.125,733.4844 455.7813,733.8906 Q455.2813,734.4688 454.4844,734.7969 Q453.4063,735.25 452.1094,735.25 Q450.5938,735.25 449.3906,734.625 Q448.4063,734.125 447.7188,733.0547 Q447.0313,731.9844 447.0313,730.7031 L447.0313,729.5469 Q447.0313,728.2188 447.6484,727.0703 Q448.2656,725.9219 449.3594,725.3047 Q450.4531,724.6875 451.6875,724.6875 Q452.4219,724.6875 453.0703,724.8516 Q453.7188,725.0156 454.2656,725.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="465.5" y="734.4102">UARTStorageDriver</text><line style="stroke:#A80036;stroke-width:1.5;" x1="437.5" x2="574.5" y1="745.5" y2="745.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="437.5" x2="574.5" y1="753.5" y2="753.5"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="444.5" y="761.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="456.5" y="768.9189">void open()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="444.5" y="775.3359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="57" x="456.5" y="782.7549">void close()</text><!--MD5=[10fbacbf49dc8825ca30de4badcc4d10]
class UARTDriverConfig--><rect codeLine="76" fill="#FEFECE" filter="url(#fa84pglxct463)" height="61.8359" id="UARTDriverConfig" style="stroke:#A80036;stroke-width:1.5;" width="132" x="193" y="905"/><ellipse cx="208" cy="921" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M210.7656,916.875 Q210.9219,916.6563 211.1094,916.5469 Q211.2969,916.4375 211.5156,916.4375 Q211.8906,916.4375 212.125,916.6953 Q212.3594,916.9531 212.3594,917.5625 L212.3594,919.0156 Q212.3594,919.625 212.125,919.8906 Q211.8906,920.1563 211.5156,920.1563 Q211.1719,920.1563 210.9688,919.9531 Q210.7656,919.7656 210.6563,919.25 Q210.6094,918.8906 210.4219,918.7031 Q210.0938,918.3281 209.4844,918.1094 Q208.875,917.8906 208.25,917.8906 Q207.4844,917.8906 206.8516,918.2188 Q206.2188,918.5469 205.7266,919.2969 Q205.2344,920.0469 205.2344,921.0781 L205.2344,922.1719 Q205.2344,923.4063 206.125,924.2266 Q207.0156,925.0469 208.6094,925.0469 Q209.5469,925.0469 210.2031,924.7969 Q210.5938,924.6406 211.0156,924.2031 Q211.2813,923.9375 211.4297,923.8594 Q211.5781,923.7813 211.7813,923.7813 Q212.1094,923.7813 212.3672,924.0391 Q212.625,924.2969 212.625,924.6406 Q212.625,924.9844 212.2813,925.3906 Q211.7813,925.9688 210.9844,926.2969 Q209.9063,926.75 208.6094,926.75 Q207.0938,926.75 205.8906,926.125 Q204.9063,925.625 204.2188,924.5547 Q203.5313,923.4844 203.5313,922.2031 L203.5313,921.0469 Q203.5313,919.7188 204.1484,918.5703 Q204.7656,917.4219 205.8594,916.8047 Q206.9531,916.1875 208.1875,916.1875 Q208.9219,916.1875 209.5703,916.3516 Q210.2188,916.5156 210.7656,916.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="100" x="222" y="925.9102">UARTDriverConfig</text><line style="stroke:#A80036;stroke-width:1.5;" x1="194" x2="324" y1="937" y2="937"/><ellipse cx="204" cy="948" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="213" y="952.4189">UARTHandler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="194" x2="324" y1="958.8359" y2="958.8359"/><path d="M191.5,1041 L191.5,1181.8125 A0,0 0 0 0 191.5,1181.8125 L452.5,1181.8125 A0,0 0 0 0 452.5,1181.8125 L452.5,1051 L442.5,1041 L300.64,1041 L269.97,967.22 L292.64,1041 L191.5,1041 A0,0 0 0 0 191.5,1041 " fill="#FBFB77" filter="url(#fa84pglxct463)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M442.5,1041 L442.5,1051 L452.5,1051 L442.5,1041 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="197.5" y="1059.4951">On embedded systems, there is no such</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="197.5" y="1075.8467">identifier as COMx for serial port</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="197.5" y="1092.1982">(in contrary to e.g Windows or Linux).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="197.5" y="1108.5498">The config is added as a simple way</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="197.5" y="1124.9014">to hide this low level thing from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="197.5" y="1141.2529">high level UARTDriver. I didn't want</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="197.5" y="1157.6045">to hardcode the UART device handler</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="197.5" y="1173.9561">in the driver.</text><!--MD5=[20f746540be94bb88eafd071c2d57044]
class WifiDriver--><rect codeLine="85" fill="#FEFECE" filter="url(#fa84pglxct463)" height="75.6719" id="WifiDriver" style="stroke:#A80036;stroke-width:1.5;" width="110" x="301" y="536"/><ellipse cx="327.7" cy="552" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M330.4656,547.875 Q330.6219,547.6563 330.8094,547.5469 Q330.9969,547.4375 331.2156,547.4375 Q331.5906,547.4375 331.825,547.6953 Q332.0594,547.9531 332.0594,548.5625 L332.0594,550.0156 Q332.0594,550.625 331.825,550.8906 Q331.5906,551.1563 331.2156,551.1563 Q330.8719,551.1563 330.6688,550.9531 Q330.4656,550.7656 330.3563,550.25 Q330.3094,549.8906 330.1219,549.7031 Q329.7938,549.3281 329.1844,549.1094 Q328.575,548.8906 327.95,548.8906 Q327.1844,548.8906 326.5516,549.2188 Q325.9188,549.5469 325.4266,550.2969 Q324.9344,551.0469 324.9344,552.0781 L324.9344,553.1719 Q324.9344,554.4063 325.825,555.2266 Q326.7156,556.0469 328.3094,556.0469 Q329.2469,556.0469 329.9031,555.7969 Q330.2938,555.6406 330.7156,555.2031 Q330.9813,554.9375 331.1297,554.8594 Q331.2781,554.7813 331.4813,554.7813 Q331.8094,554.7813 332.0672,555.0391 Q332.325,555.2969 332.325,555.6406 Q332.325,555.9844 331.9813,556.3906 Q331.4813,556.9688 330.6844,557.2969 Q329.6063,557.75 328.3094,557.75 Q326.7938,557.75 325.5906,557.125 Q324.6063,556.625 323.9188,555.5547 Q323.2313,554.4844 323.2313,553.2031 L323.2313,552.0469 Q323.2313,550.7188 323.8484,549.5703 Q324.4656,548.4219 325.5594,547.8047 Q326.6531,547.1875 327.8875,547.1875 Q328.6219,547.1875 329.2703,547.3516 Q329.9188,547.5156 330.4656,547.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="52" x="344.3" y="556.9102">WifiDriver</text><line style="stroke:#A80036;stroke-width:1.5;" x1="302" x2="410" y1="568" y2="568"/><line style="stroke:#A80036;stroke-width:1.5;" x1="302" x2="410" y1="576" y2="576"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="584"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="321" y="591.4189">void connect()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="309" y="597.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="321" y="605.2549">void disconnect()</text><path d="M228.5,730 L228.5,772.7031 A0,0 0 0 0 228.5,772.7031 L401.5,772.7031 A0,0 0 0 0 401.5,772.7031 L401.5,740 L391.5,730 L323.84,730 L347.3,612.22 L315.84,730 L228.5,730 A0,0 0 0 0 228.5,730 " fill="#FBFB77" filter="url(#fa84pglxct463)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M391.5,730 L391.5,740 L401.5,740 L391.5,730 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="234.5" y="748.4951">Communication with WiFi</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="234.5" y="764.8467">module is done via UART</text><!--MD5=[123a1d09c24313992a8650e1506f75a8]
class UARTDriver--><rect codeLine="94" fill="#FEFECE" filter="url(#fa84pglxct463)" height="48" id="UARTDriver" style="stroke:#A80036;stroke-width:1.5;" width="96" x="497" y="912"/><ellipse cx="512" cy="928" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M514.7656,923.875 Q514.9219,923.6563 515.1094,923.5469 Q515.2969,923.4375 515.5156,923.4375 Q515.8906,923.4375 516.125,923.6953 Q516.3594,923.9531 516.3594,924.5625 L516.3594,926.0156 Q516.3594,926.625 516.125,926.8906 Q515.8906,927.1563 515.5156,927.1563 Q515.1719,927.1563 514.9688,926.9531 Q514.7656,926.7656 514.6563,926.25 Q514.6094,925.8906 514.4219,925.7031 Q514.0938,925.3281 513.4844,925.1094 Q512.875,924.8906 512.25,924.8906 Q511.4844,924.8906 510.8516,925.2188 Q510.2188,925.5469 509.7266,926.2969 Q509.2344,927.0469 509.2344,928.0781 L509.2344,929.1719 Q509.2344,930.4063 510.125,931.2266 Q511.0156,932.0469 512.6094,932.0469 Q513.5469,932.0469 514.2031,931.7969 Q514.5938,931.6406 515.0156,931.2031 Q515.2813,930.9375 515.4297,930.8594 Q515.5781,930.7813 515.7813,930.7813 Q516.1094,930.7813 516.3672,931.0391 Q516.625,931.2969 516.625,931.6406 Q516.625,931.9844 516.2813,932.3906 Q515.7813,932.9688 514.9844,933.2969 Q513.9063,933.75 512.6094,933.75 Q511.0938,933.75 509.8906,933.125 Q508.9063,932.625 508.2188,931.5547 Q507.5313,930.4844 507.5313,929.2031 L507.5313,928.0469 Q507.5313,926.7188 508.1484,925.5703 Q508.7656,924.4219 509.8594,923.8047 Q510.9531,923.1875 512.1875,923.1875 Q512.9219,923.1875 513.5703,923.3516 Q514.2188,923.5156 514.7656,923.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="64" x="526" y="932.9102">UARTDriver</text><line style="stroke:#A80036;stroke-width:1.5;" x1="498" x2="592" y1="944" y2="944"/><line style="stroke:#A80036;stroke-width:1.5;" x1="498" x2="592" y1="952" y2="952"/><path d="M360,914.5 L360,957.2031 A0,0 0 0 0 360,957.2031 L462,957.2031 A0,0 0 0 0 462,957.2031 L462,940 L496.71,936 L462,932 L462,924.5 L452,914.5 L360,914.5 A0,0 0 0 0 360,914.5 " fill="#FBFB77" filter="url(#fa84pglxct463)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M452,914.5 L452,924.5 L462,924.5 L452,914.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="366" y="932.9951">Used in other</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="366" y="949.3467">places too.</text><!--MD5=[5ad4cd9c7bfe258d69f010f77acf2a05]
class IUARTDriver--><rect codeLine="98" fill="#FEFECE" filter="url(#fa84pglxct463)" height="103.3438" id="IUARTDriver" style="stroke:#A80036;stroke-width:1.5;" width="102" x="494" y="1060"/><ellipse cx="509" cy="1076" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M509.9531,1072.6406 L509.9531,1079.2969 L511.6719,1079.2969 Q512.2813,1079.2969 512.5469,1079.5313 Q512.8125,1079.7656 512.8125,1080.1563 Q512.8125,1080.5313 512.5469,1080.7656 Q512.2813,1081 511.6719,1081 L506.5313,1081 Q505.9219,1081 505.6563,1080.7656 Q505.3906,1080.5313 505.3906,1080.1406 Q505.3906,1079.7656 505.6563,1079.5313 Q505.9219,1079.2969 506.5313,1079.2969 L508.25,1079.2969 L508.25,1072.6406 L506.5313,1072.6406 Q505.9219,1072.6406 505.6563,1072.4063 Q505.3906,1072.1719 505.3906,1071.7813 Q505.3906,1071.4063 505.6563,1071.1719 Q505.9219,1070.9375 506.5313,1070.9375 L511.6719,1070.9375 Q512.2813,1070.9375 512.5469,1071.1719 Q512.8125,1071.4063 512.8125,1071.7813 Q512.8125,1072.1719 512.5469,1072.4063 Q512.2813,1072.6406 511.6719,1072.6406 L509.9531,1072.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="70" x="523" y="1080.9102">IUARTDriver</text><line style="stroke:#A80036;stroke-width:1.5;" x1="495" x2="595" y1="1092" y2="1092"/><line style="stroke:#A80036;stroke-width:1.5;" x1="495" x2="595" y1="1100" y2="1100"/><ellipse cx="505" cy="1111" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="514" y="1115.4189">void open()</text><ellipse cx="505" cy="1124.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="57" x="514" y="1129.2549">void close()</text><ellipse cx="505" cy="1138.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="514" y="1143.0908">void read()</text><ellipse cx="505" cy="1152.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="514" y="1156.9268">void write()</text><!--MD5=[0a180db10c151aa9b00756324e53e628]
link Meassurement to StoragesContainer--><path codeLine="12" d="M376.76,93.5 C388.21,93.5 399.65,93.5 411.09,93.5 " fill="none" id="Meassurement-StoragesContainer" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c16d6aa305fa10d54aee669eb56a562b]
link UARTDriver to IUARTDriver--><path codeLine="114" d="M545,960.04 C545,980.44 545,1011.31 545,1039.79 " fill="none" id="UARTDriver-to-IUARTDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="552,1039.92,545,1059.92,538,1039.92,552,1039.92" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0c3f5be8723dc34fa10cb51fc7d449dd]
reverse link UARTStorageDriver to UARTDriver--><path codeLine="115" d="M516.78,802.94 C524.39,838.54 534.23,884.58 540.05,911.83 " fill="none" id="UARTStorageDriver-backto-UARTDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="513.99,789.87,511.338,796.5757,516.508,801.6029,519.1599,794.8971,513.99,789.87" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7de8398d00877e507ad41a6047a3e2b0]
reverse link StoragesContainer to SDCardStorage--><path codeLine="117" d="M542.78,155.02 C565.19,179.77 590.12,207.31 608.55,227.68 " fill="none" id="StoragesContainer-backto-SDCardStorage" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="534.02,145.34,535.0863,152.4718,542.0796,154.2306,541.0133,147.0988,534.02,145.34" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[278eb68ce087738c48779b563fd677ec]
reverse link StoragesContainer to UARTStorage--><path codeLine="118" d="M488,158.61 C488,185.35 488,214.74 488,234.57 " fill="none" id="StoragesContainer-backto-UARTStorage" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="488,145.34,484,151.34,488,157.34,492,151.34,488,145.34" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[be86c472081707a0253ecbf8508ad3de]
reverse link StoragesContainer to WifiStorage--><path codeLine="119" d="M435.34,155.21 C429.12,162.52 422.9,169.91 417,177 C405.24,191.14 392.54,206.88 381.5,220.68 " fill="none" id="StoragesContainer-backto-WifiStorage" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="443.79,145.32,436.8517,147.2848,435.9968,154.445,442.9351,152.4802,443.79,145.32" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f4513ebe9d4ae88f74e7db2d733c6ce6]
link WifiStorage to IStorage--><path codeLine="123" d="M347.21,297.22 C345.64,309.38 343.85,323.3 342.07,337.08 " fill="none" id="WifiStorage-to-IStorage" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="349.01,337.98,339.52,356.92,335.13,336.19,349.01,337.98" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[18b3d315b5428e116120cbde23501107]
link SDCardStorage to IStorage--><path codeLine="124" d="M576.5,288.97 C525.73,313.68 452.79,349.19 399.99,374.89 " fill="none" id="SDCardStorage-to-IStorage" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="402.92,381.25,381.87,383.71,396.79,368.66,402.92,381.25" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[930c73cafcdde33c19c30992741eaa74]
link UARTStorage to IStorage--><path codeLine="125" d="M463.78,283.05 C445.66,300.29 420.01,324.7 396.21,347.34 " fill="none" id="UARTStorage-to-IStorage" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="401.04,352.42,381.72,361.13,391.39,342.28,401.04,352.42" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[48058f3d815138c6bfd7cb462eb5e4eb]
reverse link UARTStorage to UARTStorageDriver--><path codeLine="127" d="M489.33,296.34 C492.66,386.89 501.28,621.88 504.64,713.33 " fill="none" id="UARTStorage-backto-UARTStorageDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="488.86,283.33,485.0871,289.4753,489.3085,295.3216,493.0815,289.1763,488.86,283.33" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[24ea1a3a1c99c02c467f2545e0ecae49]
reverse link SDCardStorage to SDCardDriver--><path codeLine="128" d="M640.43,303.41 C648.86,386.11 667.33,567.31 677.98,671.87 " fill="none" id="SDCardStorage-backto-SDCardDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="639.09,290.31,635.7243,296.6875,640.3167,302.2471,643.6824,295.8697,639.09,290.31" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2dc7e96a9887d6a9972754472472160a]
reverse link WifiStorage to WifiDriver--><path codeLine="129" d="M380.92,308.78 C388.31,323.74 395.23,340.59 399,357 C411.63,412.01 411.6,428.98 399,484 C394.9,501.9 386.72,520.38 378.58,535.84 " fill="none" id="WifiStorage-backto-WifiDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="374.94,297.23,374.1511,304.3978,380.4642,307.8829,381.253,300.715,374.94,297.23" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[490bc86ac7b0803432b8af5cb7ab5df2]
link SDCardDriver to IStorageDriver--><path codeLine="131" d="M685.14,831.22 C684.99,844.32 684.85,857.78 684.71,870.47 " fill="none" id="SDCardDriver-to-IStorageDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="691.7,871.01,684.48,890.93,677.7,870.85,691.7,871.01" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f2f99f39a22ea476b85968025f790254]
link UARTStorageDriver to IStorageDriver--><path codeLine="132" d="M542.45,789.87 C566.79,814.83 599.3,848.15 627.02,876.58 " fill="none" id="UARTStorageDriver-to-IStorageDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="632.06,871.72,641.01,890.93,622.04,881.5,632.06,871.72" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f75aa50b865b0718b3b967a088c3ae2e]
link WifiDriver to IStorageDriver--><path codeLine="133" d="M300.89,596.05 C268.38,611.68 229.98,636.47 211,672 C177.7,734.33 164.89,777.45 211,831 C266.22,895.12 497.02,864.7 608.35,892.3 " fill="none" id="WifiDriver-to-IStorageDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="610.58,885.66,627.68,898.17,606.51,899.06,610.58,885.66" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[51df14ea5dc5b39be42bec6bfd69328b]
reverse link WifiDriver to UARTStorageDriver--><path codeLine="135" d="M396.5,622.38 C420.92,650.95 451.57,686.82 474.23,713.33 " fill="none" id="WifiDriver-backto-UARTStorageDriver" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="387.81,612.22,388.6649,619.3802,395.6032,621.345,394.7483,614.1848,387.81,612.22" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[59ca48e53df767fba1f570ccd44d351a]
reverse link UARTStorageDriver to UARTDriverConfig--><path codeLine="137" d="M457.33,798.86 C445.14,809.79 431.85,821.12 419,831 C383.93,857.95 341.93,885.07 309.76,904.86 " fill="none" id="UARTStorageDriver-backto-UARTDriverConfig" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="467.29,789.82,460.159,790.8921,458.4059,797.8868,465.5369,796.8148,467.29,789.82" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[617175b1d91e46b9db175e1e604a5bfd]
@startuml

package Application {
    class Meassurement

    class StoragesContainer {
        +void init()
        +void configure()
        +void tick()
        +void write(Meassurement)
    }

    Meassurement - StoragesContainer
}

Package Device {
    interface IStorage {
        +void init()
        +void deinit()
        +void write()
        -void serialize()
    }


    class SDCardStorage {
        -fileName
    }

    class UARTStorage {
    }

    note left of WifiStorage
    ESP8266MOD has only Wifi support.
    In future it would be possible 
    to use ESP32 that has also Bloototh.
    end note
    class WifiStorage {
        -login
        -password
    }
}

Package Driver {
    interface IStorageDriver {
        +void init()
        +void deinit()
        +void write()
    }

    class SDCardDriver {
        -void mountFileSystem()
        -void unmountFileSystem()
        -void openFile()
        -void closeFile()
        -void sync()
        -void writeToFile()

        - fileSystemHandler
        - logFileHandler
    }

    class UARTStorageDriver {
        -void open()
        -void close()
    }

    note bottom of UARTDriverConfig
    On embedded systems, there is no such 
    identifier as COMx for serial port 
    (in contrary to e.g Windows or Linux).
    The config is added as a simple way
    to hide this low level thing from 
    high level UARTDriver. I didn't want
    to hardcode the UART device handler
    in the driver.
    end note
    class UARTDriverConfig {
        +UARTHandler
    }

    note bottom of WifiDriver
    Communication with WiFi 
    module is done via UART
    end note

    class WifiDriver {
        -void connect()
        -void disconnect()
    }

    note left of UARTDriver
    Used in other 
    places too.
    end note
    class UARTDriver {

    }

    interface IUARTDriver {
        +void open()
        +void close()
        +void read()
        +void write()
    }
}









UARTDriver - -|> IUARTDriver
UARTStorageDriver o- - UARTDriver

StoragesContainer *- - SDCardStorage
StoragesContainer *- - UARTStorage
StoragesContainer *- - WifiStorage



WifiStorage - -|> IStorage
SDCardStorage - -|> IStorage
UARTStorage- -|> IStorage

UARTStorage o- - UARTStorageDriver
SDCardStorage *- - SDCardDriver
WifiStorage *- - - WifiDriver

SDCardDriver - -|> IStorageDriver
UARTStorageDriver - -|> IStorageDriver
WifiDriver - -|> IStorageDriver

WifiDriver o- - UARTStorageDriver

UARTStorageDriver *- - UARTDriverConfig

@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1250
Language: fr
Country: FR
--></g></svg>